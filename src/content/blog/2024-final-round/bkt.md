---
title: "ICTSC2024 本戦 問題解説: [BKT] リンクの迷宮"
description: "ICTSC2024 本戦 問題解説: リンクの迷宮"
tags: [ICTSC2024,問題解説,ネットワーク関連]
pubDate: 2025-03-31T00:00:00
slug: "2025/03/31/ictsc2024final/bkt"
draft: false
renderer: "md"
sticky: false
---

# 問題文

## 概要

ICTSC2024 本戦の手元問題で使用するスイッチを設定していたところ、原因不明でリンク速度が 100Mbps になってしまった。
原因を特定し、参加者に快適なネットワーク環境を提供してください。

## 前提条件

使用するポートは以下の通り

- C841-1
  - Gi0/3
- Nexus93108
  - Eth1/5

### 制約

- 使用するスイッチのポートを変更してはいけない

## 初期状態

- C841-1 Gi0/3 と Nexus93108 Eth1/5 間が 100Mbps でリンクアップする

## 終了状態

- C841-1 Gi0/3 と Nexus93108 Eth1/5 間が 1000Mbps でリンクアップする
  - 本問題の原因を特定し再発防止策を講じるために、この問題が再現できるよう詳細な報告書を作成すること

---

## 解説

この問題は、以下の 2 つのトラブルを解決することで正解となります。

- スイッチ間のリンクスピードの誤設定
- LAN ケーブルの結線ミス

### 解決方法

#### スイッチ間のリンクスピードの誤設定

スイッチ間で 100M でリンクアップしている原因は、ポートの速度設定の不一致（オートネゴシエーションと固定速度設定のミスマッチ）です。
以下のように Nexus93108 でインタフェースの状態を確認することができます。

```txt
n9k# show interface eth1/5 status

--------------------------------------------------------------------------------
Port          Name               Status    Vlan      Duplex  Speed   Type
--------------------------------------------------------------------------------
Eth1/5        BKT                connected routed    full    100     10g
```

対向機器 (C841M-1) の設定を確認すると、速度設定が異なっていることが分かります。

```txt
! C841M-1
interface Gi0/3
  speed auto

! Nexus93108
interface Eth1/5
　speed 100
```

この不一致を解消するには、両方のスイッチで同じ速度設定を行います。正解となる設定は以下のいずれかです。

- 双方を `speed auto` に設定してオートネゴシエーションを有効にする
- 双方を `speed 1000` に設定して固定速度にする

`speed auto` に統一する場合、Nexus93108 で設定を行います。

```txt
en
conf t
interface Eth1/5
  speed auto
  ! もしくは
  ! no speed
```

`speed 1000` に統一する場合、Nexus93108 と C841M-1 で設定を行います。

```txt
! Nexus93108
en
conf t
interface Eth1/5
  speed 1000

! C841M-1
en
conf t
interface Gi0/3
  speed 1000
```

#### LAN ケーブルの結線ミス

スイッチのリンクスピード設定を修正すると、リンクが確立しなくなります。
これは、LAN ケーブルの結線ミスが原因です。
今回、意図的に誤結線の UTP ストレートケーブルを使用しました。以下の表のように、配線が誤っていることが分かります。

| ピンアサイン      | Pin 1 | Pin 2 | Pin 3 | Pin 4 | Pin 5 | Pin 6 | Pin 7 | Pin 8 |
| ----------------- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- |
| 誤結線 (初期状態) | 橙白  | 橙    | 緑白  | 緑    | 青白  | 青    | 茶白  | 茶    |
| 正解 (T568B)      | 橙白  | 橙    | 緑白  | 青    | 青白  | 緑    | 茶白  | 茶    |

今回使用したケーブルは、片側が正しい結線、もう片側が誤結線になっていました。
そのため、正しく結線された UTP ケーブルを作成することで、終了状態である 1000Mbps でリンクを確立させることができます。

## 採点基準

- インタフェースの speed を正しく設定する：45 点 (30%)
- ツイストペアが正しい UTP ケーブルを作成する：90 点 (60%)
- LAN ケーブルのピンアサインについて触れられている：15 点 (10%)

## 講評

本問題では、会場のかしめコーナーで LAN ケーブルを作成する必要がありました。
周囲のチームが LAN ケーブルを作成していたり、かしめコーナーが設置されていたことから、何となく気づいた方もいたかもしれません。
物理問題ならではのトラブルも含め、楽しんでいただけたなら幸いです。

また、本問題を作成するにあたり、以下の LAN ケーブル結線パターンとさまざまなリンクスピードで検証を行いました。

| No  | ピンアサイン                 | Pin 1 | Pin 2 | Pin 3 | Pin 4 | Pin 5 | Pin 6 | Pin 7 | Pin 8 |
| --- | ---------------------------- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- |
| A   | 正解 (T568B)                 | 橙白  | 橙    | 緑白  | 青    | 青白  | 緑    | 茶白  | 茶    |
| B   | 誤結線 (初期状態)            | 橙白  | 橙    | 緑白  | 緑    | 青白  | 青    | 茶白  | 茶    |
| C   | 誤結線 (ツイストペア混ぜ x2) | 橙白  | 橙    | 緑白  | 緑    | 茶白  | 青    | 青白  | 茶    |
| D   | 誤結線 (切断 1)              | 橙白  | 橙    | 緑白  | 切断  | 青白  | 緑    | 切断  | 茶    |
| E   | 誤結線 (切断 2)              | 橙白  | 橙    | 緑白  | 青    | 青白  | 緑    | 切断  | 切断  |

検証結果は省略しますが、気になる方は是非ご自身で試してみて下さい！
