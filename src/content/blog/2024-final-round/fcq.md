---
title: "ICTSC2024 本戦 問題解説: [FCQ] リンクは上がっているのに…"
description: "ICTSC2024 本戦 問題解説: リンクは上がっているのに…"
tags: [ICTSC2024, 問題解説,ネットワーク関連]
pubDate: 2025-03-31T00:00:00
slug: "2025/03/31/ictsc2024final/fcq"
draft: false
renderer: "md"
sticky: false
---

# 問題文

## 概要

黒羽くんはとある大規模イベントネットワークの構築に携わっている。
ネットワーク構築も大詰めで、チームメンバーみんなでネットワーク疎通のチェックを行うことになった。
疎通チェックをしていると、チームメンバーから「このポート、繋ぐとリンクは上がるけど、通信できません」と報告が挙がった。
設定担当がコンフィグを確認したが、軽く眺めた限りではインターフェースの設定に問題はなさそうだった。
黒羽くんは設定担当から「このポート動くはずだから、もう一回確かめてくれない？」と頼まれた。
夜も更けて眠そうな黒羽くんを手伝い、本当に通信できないのかもう一度確認し、通信できないようであれば、その原因を突き止めてほしい。
設定担当によると、自分で設定を行ってもいいが、きちんと原因と解決方法を示してほしいとのことだ。

## 前提条件

- 事前に QUO 「何も出てこない」 を解決している必要がある
- `C841-2` の `Gi0/2` ポートで発生するトラブル
- `C841-1.Gi0/2` 及び `C841-2.Gi0/2` はVLAN520のアクセスポート
- 報告書では以下の内容を明確に記載すること
    - 原因究明に至るまでの過程
        - 何を確認し、何を推測して原因を究明したかを順序立てて記載すること
    - 原因
    - 変更したコンフィグの内容
        - 複数回解答を提出する場合は、初期状態からの変更を全て記載すること

### 制約

- `C841-2.Gi0/2` に接続されたケーブルを抜去してはならない
- `C841-1.Gi0/2` に接続されたケーブルを抜去し、他の機器やポートに繋ぎかえてはならない
    - 例外として、一時的に `C841-1.Gi0/2` に接続されたケーブルを抜去し、自身のPCに接続することで、自身のPCと `C841-2.Gi0/2` を接続し、状況の切り分けを行うことは認められる
- VLANの割り当てを変更してはならない
- インターフェースに割り当てられたIPアドレスを変更してはならない

## 初期状態

- C841-1とC841-2の間でping疎通性がない
    - C841-1から `ping fd0c:15c0:cd71::1` を実行しても応答がない

## 終了状態

- C841-1とC841-2の間でping疎通性がある
    - C841-1から `ping fd0c:15c0:cd71::1` を実行すると応答がある

## 接続情報

| ホスト名 | IPアドレス | ユーザ | パスワード|
| --------- | ----------- | ------ | ------------------ |
| C841-1 | fd00:d056:6:19::2 | user | ictsc2024 |
| C841-2 | fd00:d056:6:19::3 | user | ictsc2024 |

---

## 解説

この問題では、 `C841-2.Gi0/2` がmonitor-portになっているため、対向の機器ではリンクアップしたように見えるものの、通信はできない、というトラブルが発生していました。
`show interfaces` などをすると、 `GigabitEthernet0/2 is up, line protocol is down (monitoring)` と表示されるため、L1ではリンクアップしているものの、L2のフレーム転送ができる状態にはないことがわかります。
また、 `monitoring` という表示からmonitor-portになっていることがわかります。

このトラブルは、 `C841-2.Gi0/2` がパケットミラーリングのミラー先になっていることが原因のため、以下のようにパケットミラーリングの設定を削除することで解決できます。

```
no monitor session 1 destination interface Gi0/2
```

また、状況によってはループ検知などでインターフェースが閉塞される場合があるため、パケットミラーリングの設定を削除した後、リンクのdown/upを行う必要がある場合もあります。

monitor sessionの設定は `interface GigabitEthernet0/2` の項目内にはないため、インターフェース設定のみを確認していた場合、気付きづらいかもしれません。

なお、VLAN520インターフェースはIPv6関連の設定がなされていますが、この点はトラブルには一切関係ありません。
ここではRAで対向機器にプレフィクス `fd0c:15c0:cd71::/64` を広報し、対向機器がSLAACでアドレス設定可能なようにしているだけです。

この問題では、前提条件にて報告書に記載すべき事項が定められているため、報告書の記載が足りていない場合は減点されています。
採点基準については後述しますが、原因究明の過程や究明した結果、自身の行なった操作を明確に記述することが要件となっています。
原因究明については、monitor sessionのコンフィグから気付いたか、 `C841-2.Gi0/2` のステータスから気付いたかなどは問わず、報告書に書かれているかという点のみが採点の対象となっています。

## 採点基準

- 報告書に、原因究明に至るまでの過程と原因が明確に記述されている
    - 何によって原因を究明したかは問わない
        - 「コンフィグを見ただけで気づいた」などでも良い
    - 原因を明確に記述している
        - `monitoring`, `monitor session`, `monitor port`, `mirroring`, `mirroring port` 若しくはその日本語表現又はこれらに類似した内容を言及している
        - コンフィグへの言及か、インターフェースのステータスへの言及かは問わない
    - 50点
- 報告書に、変更したコンフィグの内容が過不足なく記述されている
    - 変更点が過不足なく**記述**されていることが要件
        - 必要最低限以外の変更が行われていたとしても減点はしない
    - 以下の点について問題環境と報告書に齟齬がある場合、この部分点は与えられない
        - `monitor session`
        - `interface GigabitEthernet0/2`
        - `interface Vlan520`
    - 50点
- C841M-1から `ping fd0c:15c0:cd71::1` を実行すると応答がある
    - 50点

150点満点

## 講評

この問題は、問題文にもあるように、作問者が「とある大規模イベントネットワークの構築」を行なっている際に発生したトラブルから着想を得たものです。
多くの人間が関わる本番環境においては、設定を投入するにしても事前の報連相が重要となります。
このため、何を見て、何が問題であることを突き止め、何を変更して修正したのか、という報告を厳密に確認する問題としました。
一部の解答では、原因究明について「pingが通らない。これはモニターセッションが原因である。」のように論理が飛躍した記述をしており、減点の対象となっていました。
最終的には全てのチームが原因と原因究明の過程について言及し、減点となったチームはなくなりました。
順序立てた説明は、大学などで論文を執筆する際や、社会人になって業務をする際にも通じるものなので、是非日本語を書くという行為にも気を配っていただければと思います。

インターフェースのステータスから原因を究明したチームは4チーム、コンフィグを見て原因を究明したチームは2チームでした。
解説にも記載したように、monitor sessionの設定はインターフェースの設定には含まれないため、コンフィグでインターフェース設定のみを確認していた場合は気付きづらかったかもしれません。
また、今回の問題環境ではそこまで全体のコンフィグ量が多くありませんでしたが、様々なコンフィグが入っているとコンフィグを見て解くというのは難しいかもしれません。

この問題は解答提出チームが8チーム、正答チームが6チームであり、解答提出が少ないと感じました。
気付けば簡単、気付くまでが大変(かも？)というタイプの問題なので、諦めたチームが多いように感じます。
