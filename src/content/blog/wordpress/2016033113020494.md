---
title: "問題解説: インターネットに繋がりません"
description: "問題解説: インターネットに繋がりません"
tags: [ICTSC5,ネットワーク関連,問題解説]
pubDate: 2016-03-31T13:02:39
slug: "2016/03/31/問題解説: インターネットに繋がりません"
draft: false
renderer: "html"
sticky: false
---

<p>初めまして、大阪工業大学2回生の吉川尚希です。<br />
問題案と問題文を池田悠人さんが担当し、その他の想定解と採点基準等を私が担当して二人で作成しました。</p>
<h2>問題文</h2>
<p>「株式会社ぽよぽよ」では老朽化に老朽化を重ねた社内システムを問題視する声が以前から挙がっていました。<br />
この問題に解決するため、ITに少し詳しいだけで社内システムの運用・保守を担当する情報システム部門の長に任命されたあなたは、上司にシステムの刷新を請願し続けてようやく申請が通り、システムの刷新を行っていました。<br />
2015年にシステムの刷新が完了。しかし2016年2月27日現在、あなたは朝出勤するとなぜか外部へのインターネットが繋がらないことに気づきました。<br />
周りの上司、社員に聞きましたが曖昧な返答しかせず、あなたに対して怒ってばかりです。<br />
上司「N+1の冗長化構成で構築しているのに、繋がらないのはおかしい！」<br />
「午前中になんとかするのだ」<br />
あなたは朝調査したところ2つの回線は異なるISPと契約しており、メイン回線のISPが致命的なシステムダウンを起こし、問い合わせたところ復旧に1時間かかるとのことです。<br />
情報システム部門の長たるあなたは、上司の指示に応えて回線をすみやかに復旧し、二度と発生しないように冗長化の設定を再設定しなければなりません。<br />
上司に報告書と変更を行ったルーターの設定(running-config)を提出してください。</p>
<h2>トラブルの原因</h2>
<p>今回の問題ではデフォルトゲートウェイを冗長化するHot Standby Routing Protcol(以下HSRP)を用いて冗長化の設定をしていました。<br />
しかし、今回の初期設定だと10.100+x.3.0/24のネットワークしか監視していないため、他のネットワークで障害が発生してもHSRPが機能せず、デフォルトゲートウェイが切り替わらなかったため外部へのそつうが途絶えている状況となっていました。<br />
<img decoding="async" src="/images/wp/2016/03/HSRP.png.webp" alt="原因トポロジー図" /></p>
<h2>解決方法の一例</h2>
<p>回線の復旧方法例<br />
RT2のinterface gi0/1を一時的にshut downする等で機能していなかったHSRPを機能させる。<br />
冗長化の再設定例<br />
以下のコマンドをRT2に追加し、オブジェクトトラッキングを設定することで、ネットワークの監視方法を拡張することができます。この設定をすることで任意の宛先へのpingの到達性で宛先までのネットワークを監視することができるようになります。</p>
<ul>
<li>ip sla 1<br />
icmp-echo (宛先IP address) source-interface gi0/0<br />
timeout 5000<br />
frequency 5000<br />
exit</li>
<li>ip sla schedule 1 life forever start-time  now</li>
<li>track 1 ip sla 1 reachability</li>
<li>int gi0/1<br />
standby 1 track 1 decrement 100<br />
exit</li>
</ul>
<p>この他にもHSRPの設定を消去してVirtual Router Redundancy Protocol(VRRP)に切り替えて設定する解答方法もあります。</p>
<h2>出題意図</h2>
<p>情報関係では有事の際にもシステムやサービスを停止しないために、冗長性を持たせることが重要になっています。しかし、冗長化の機能を使用しても設定と状況次第では実際は冗長化されていないこともあるというのを知っていただくために出題しました。<br />
以上から冗長化の再設定を重要視して採点させていただきました。</p>
