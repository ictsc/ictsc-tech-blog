---
title: "ICTSC2018 本戦 問題解説: 新人の新人研修 第n段"
description: "ICTSC2018 本戦 問題解説: 新人の新人研修 第n段"
tags: [ICTSC2018,サーバー関連,問題解説]
pubDate: 2019-03-21T17:00:51
slug: "2019/03/21/ICTSC2018 本戦 問題解説: 新人の新人研修 第n段"
draft: false
renderer: "html"
sticky: false
---

<h1>問題文</h1>
<p>あなたは新入社員のメンターとして研修に参加していました。<br />
ある日、上司に急用が入り、<br />
「今から日曜まで出張に行ってくるから、それまでに研修用のWebサーバにアクセスできることだけ確認しといて！」<br />
と言われました。しかし、指示されたサーバーである http://192.168.9.1 にアクセスしても何も表示されません。</p>
<p>このサーバーはWebサーバーとしてLighttpdがインストールされており、現在の状態に戻す方法がわかっていれば自由に設定を変更することは許されています。</p>
<p>Webサーバが動作した上で同じ問題が再発しないように修正を行い、以下を上司に報告してください。<br />
&#8211; トラブルの原因<br />
&#8211; 解決のために行ったコマンド<br />
&#8211; 行った変更を元に戻すためのコマンド</p>
<h2>情報</h2>
<ul>
<li>IPアドレス: <code>192.168.9.1</code></li>
<li>ユーザー: <code>admin</code></li>
<li>パスワード: <code>hello-world</code></li>
<li>インストールされているWebサーバー: lighttpd</li>
</ul>
<h2>問題のスタート状態</h2>
<ul>
<li>サーバーへのHTTP通信が失敗する</li>
</ul>
<h2>問題のゴール状態</h2>
<ul>
<li>サーバーへHTTP通信が成功し、ブラウザから見るとLighttpdのプレースホルダのページが表示される</li>
<li>来年以降同じ問題が再発しないよう設定する</li>
</ul>
<h1>トラブルの概要</h1>
<p>systemdで起動時のターゲットにWebサーバ(lighttpd)が登録されていない</p>
<h1>解説</h1>
<p>この問題は、Ubuntu 18.04のinitシステム（起動時に最初に呼び出される、その他に起動に必要なアプリケーションを起動したりシステムを管理するためのアプリケーション)であるsystemdを用いた環境で「サービス」(デーモン)が起動していないというトラブルです。<br />
使用しているサーバーはUbuntu 18.04を使用しています。このディストリビューションでは、initシステムとしてsystemdを採用しています。<br />
initrcやinitngなどを使用しているシステムでは <code>/etc/init.d/</code> 配下にあるファイルを用いて起動していますが、systemdを使用したシステムでは <code>systemctl</code> というコマンドを使用します。</p>
<p>また、OS起動時に自動起動する設定も同じコマンドで行います。</p>
<p>今回のトラブルでは、Webサーバーはインストール済みの状態ですので、このコマンドを使用してサービスを起動/停止することで解決可能です。</p>
<p><code>systemctl start lighttpd</code><br />
<code>systemctl stop lighttpd</code></p>
<p>また、この変更のみでは自動起動はしないため、設定を元に戻すコマンドは必要ありません。<br />
しかし、自動起動設定を行った場合は自動起動設定を停止するコマンドも投入する必要があります。</p>
<p>自動起動設定コマンドと停止コマンドは以下のとおりです。</p>
<p><code>systemctl enable lighttpd</code><br />
<code>systemctl disable lighttpd</code></p>
<h1>回答例</h1>
<p>お疲れ様です。解答を送信します。</p>
<p>今回のトラブルは、lighttpdが起動していないことが原因でした。<br />
lighttpdはインストール済みのため、以下の手順でWebサーバの起動をすることができます。</p>
<h3>Webサーバの起動</h3>
<p><code>systemctl start lighttpd</code></p>
<p>また、同じ問題が再発しないよう、研修終了までWebサーバを自動起動するようにします。</p>
<h3>Webサーバの自動起動の設定</h3>
<p>`systemctl disable lighttpd</p>
<p>これらの設定を元に戻す方法は以下のとおりです。</p>
<h3>Webサーバの停止・自動起動の解除</h3>
<p><code>systemctl stop lighttpd</code><br />
<code>systemctl disable lighttpd</code></p>
<h1>採点基準</h1>
<ul>
<li>上記手順をすべて達成して100%</li>
<li>自動起動をしていない -10点</li>
<li>元に戻す方法を記述していない -10点</li>
</ul>
<h1>講評</h1>
<p>この問題は「コンテストサイトの使い方を学ぶための簡単な問題」という位置づけだったこともあり、とても簡単な問題でした。そのおかげで、全チームに満点を付与することができました。作門者もにっこり喜んでいます。<br />
Webサーバの設定ファイルを変更したチームもありましたが、もしかしたら惰性や習慣で <code>systemctl start lighttpd</code> をしてしまったのかなと個人的には思っています。<br />
私も以前に似たようなことを行い、問題解答不能になったことがありました。<br />
実際にサーバーに対して操作を行う際には、原因の調査と解決を分けて考えることで<br />
「なぜこのトラブルが起きているのか？」を正しく判断することができ、<br />
また「どのようにしてこのトラブルを解決するか」が分かれば、トラブル解決の途中で新たなトラブルに遭遇した際にも<br />
「どのようにして環境をロールバックするか」を理解することにつながると思います。<br />
トラブルが起きている当初の環境への復旧（ロールバック）は「ICTSCの問題環境」では簡単に行えますが、実務環境では大抵できません。ここからの締めの文章が浮かびませんが、みなさん頑張ってください。</p>
<p>問題タイトルは、「新人（入社数ヶ月）が新人（入社数日）のメンターになり、新人研修を行っている」ようなシチュエーションを考えて付けましたが、問題文を作る能が無く、なーんか変な内容になってしまいました。</p>
