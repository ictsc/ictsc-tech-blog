---
title: "問題解説 : ドキッ!新人だらけのトラブル開発部署"
description: "問題解説 : ドキッ!新人だらけのトラブル開発部署"
tags: [ICTSC9,ネットワーク関連,問題解説]
pubDate: 2018-03-31T21:53:20
slug: "2018/03/31/問題解説 : ドキッ!新人だらけのトラブル開発部署"
draft: false
renderer: "html"
sticky: false
---

<h1>問題文</h1>
<p>仮想機密伝送路課では、ルータの検証中に疎通が取れないトラブルにぶつかっており、現在在室している社員では解決できないらしい。<br />
代わりにこの問題を解決し、社員に対して説明してほしい。<br />
ただし、疎通先のルータは他部署が管理しているものであり設定を書き換えることができない。</p>
<h1>トラブルの概要</h1>
<p>この問題はciscoルータをブロードバンドルータとして使えるように設定する際に問題が発生したという設定であった。<br />
configを読み解くと、一般的なISPで使用されるPPPoEを使用してWAN側のIPアドレスを取得し、ローカル側にはプライベートIPアドレスをDHCPで配布してNAPTを行うことで割り当てられた一つのアドレスでWAN側へ接続していることがわかる。</p>
<p><img decoding="async" loading="lazy" src="/images/wp/2018/03/HIR-1-300x82.png.webp" alt="" width="300" height="82" class="alignnone size-medium wp-image-1623" /></p>
<h1>解説</h1>
<p>この問題の場合PPPoEを利用しているため、NAPTのWAN側インターフェースはdialerであるのに対し、NATのoutsideが物理配線のインターフェースに設定されていた。<br />
この個所を特定し、正しいconfigに書き換えることでISP側に設定したIPアドレスに対し疎通が取れるようになっていた。</p>
<h1>解答例</h1>
<pre><code>ip nat inside source list 11 interface dialer 11 vrf vrf11 overload
interface Dialer 11
ip nat outside
exit
ip route vrf vrf11 0.0.0.0 0.0.0.0 dialer 11 permanent</code></pre>
<h1>採点基準</h1>
<p>この問題は以下のポイントを押さえていれば部分点が与えられるようになっていた。</p>
<ul>
<li>NAPTが原因であることを指摘できているかどうか</li>
<li>正しく設定を変更しPCから指定のアドレスにpingで疎通を確認できる</li>
</ul>
<h1>講評</h1>
<p>この問題を解くためには、参加者はPPPoEやNATに関する知識が必要な問題であった。<br />
参加者の中には何度も関係のない解答を送ってきたチームもあったが、落ち着いて問題を切り分けることでより問題に気付きやすくなるだろう。<br />
また、今回のコンテストで初めてPPPoEを知った参加者がいるのであれば、少し複雑ではあるが一般的な家庭とISPの間で接続を確立する手段としてよく利用されるプロトコルであるため、これを機に理解を深めるのもいいだろう。<br />
本問題はコンテスト向けに一部の設定を省略しているため、本問題の状態で運用するとセキュリティ面などに問題がある。<br />
そのため、実際に家庭に導入する際は正しくDNSやACLを設定しなければならない。</p>
