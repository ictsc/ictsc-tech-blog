---
title: "問題解説: IPv6 筆記"
description: "問題解説: IPv6 筆記"
tags: [ICTSC2018,ネットワーク関連,問題解説]
pubDate: 2018-08-27T22:30:54
slug: "2018/08/27/問題解説: IPv6 筆記"
draft: false
renderer: "html"
sticky: false
---

<h1>1問目</h1>
<h2>問題文</h2>
<h3>IPv6問題 No.1 ステートレスアドレス自動設定(SLAAC)</h3>
<p>以下の選択肢のうち、ノード起動時におけるSLAACの順序として正しいものを選択してください。<br />
a. ノードはリンクローカルユニキャストアドレスを生成する<br />
b. ノードはユニークローカルユニキャストアドレスを生成する<br />
c. ノードはグローバルユニキャストアドレスを生成する<br />
d. ノードはマルチキャストでRSパケットを送信する<br />
e. ノードはエニーキャストでRSパケットを送信する<br />
f. ルータはRSパケットを受け取ったらRAパケットを返信する<br />
g. ルータはRSパケットを受け取ったらDHCPv6でアドレスを作りRAパケットで返信する</p>
<h4>選択肢</h4>
<ul>
<li>b → e → f → c</li>
<li>a → e → f → b</li>
<li>a → d → f → b</li>
<li>a → d → g → c</li>
<li>a → d → f → c</li>
<li>a → e → g → b</li>
</ul>
<h2>解説</h2>
<p>IPv6ではDHCPがなくてもIPアドレスとデフォルトゲートウェイが設定できるようになりました。<br />
この問題はそのステートレスアドレス自動設定(SLAAC)の手順に関するものです。<br />
選択肢がやたらと多いのは勘や順序の傾向から適当に解くのを防ぐためです。<br />
その結果としてですが正解が2つできてしまいました、採点中に気がついたのでどちらでも得点が入っていますが、競技中に悩んだ方は無駄に時間を取らせてしまい申し訳ないです。</p>
<p>さて正解ですが、以下の2つです。</p>
<ul>
<li>a → d → f → c</li>
<li>a → d → f → b</li>
</ul>
<p>文章にすると以下になります。<br />
1. ノードはまず、リンクローカルユニキャストアドレスを生成する<br />
2. リンクローカル全ルータマルチキャストでRS(ルータ要請)パケットを送信する<br />
3. ルータがRSパケットを受け取るとリンクローカルユニキャストでRA(ルータ応答)パケットを返信する<br />
4. ノードはRAからグローバル(or ユニーク)ユニキャストアドレスを生成する</p>
<h2>講評</h2>
<p>調べれば簡単に分かる問題なので正答率は高かったです。</p>
<h1>2問目</h1>
<h2>問題文</h2>
<h3>IPv6問題 No.2 EUI-64</h3>
<p>以下のMACアドレスからユニキャストアドレスのインターフェースIDを自動生成した場合に適切なものを選択肢から選んでください。</p>
<p>94:de:80:6c:8e:4d</p>
<h4>選択肢</h4>
<ul>
<li>fe80::94de:80ff:ff6c:8e4d</li>
<li>94de:80ff:fe6c:8e4d</li>
<li>ffff:94de:806c:8e4d</li>
<li>96de:80ff:fe6c:8e4d</li>
<li>94de:80ff:ff6c:8e4d</li>
</ul>
<h2>解説</h2>
<p>IPv6のSLAACではEUI-64でMACアドレスを変換し使用することによってユニークなアドレスを生成できます。<br />
IPv6のアドレスはプレフィックスとインターフェースIDからなり、これはIPv4のネットワークアドレスとホストアドレスに対応します。<br />
この問題はEUI-64でMACアドレスからインターフェースIDを生成した場合どうなるかを答えるものです。</p>
<p>変換の手順は以下です。<br />
1. MACアドレスを24ビットずつに分割(半分)<br />
2. 分割した間に0xfffeを挿入<br />
3. 7ビット目を反転</p>
<p>正解は 96de:80ff:fe6c:8e4d です。</p>
<h2>講評</h2>
<p>不正解の解答ではステップ3を忘れているケースや、ステップ2で0xfffeではなく0xffffを挿入しているケースが多く見られました。<br />
ちなみに検索するとEUI-64コンバーターが出てきます。<br />
http://silmor.de/ipaddrcalc.html#ip6</p>
<p>この手の計算問題は自分でやると間違えるのでコンバータに任せましょう。</p>
<h1>3問目</h1>
<h2>問題文</h2>
<h3>IPv6問題 No.3 IPv6豆知識</h3>
<p>以下のIPv6に関する文章の中から最も正しいものを選んでください。</p>
<h4>選択肢</h4>
<ul>
<li>IPv6ではアドレス解決にARPv6を使う</li>
<li>RA(Router Advertisement)パケットではDNSアドレスを通知することができない</li>
<li>ICMPv6はDos攻撃に利用されるため常にフィルタしたほうが良い</li>
<li>ユニークローカルアドレスはルータを超えられる</li>
<li>IPv6にはIPv4射影アドレスがあるので、宛先ノードがIPv6非対応でもIPv6で通信することができる</li>
</ul>
<h2>解説</h2>
<p>IPv6について雑多に知識を付けてもらおうと思い出題しました。<br />
選択肢の中で最も正しいのは <code>ユニークローカルアドレスはルータを超えられる</code> です。</p>
<p>それぞれの選択肢を解説していきます。</p>
<h4>IPv6ではアドレス解決にARPv6を使う</h4>
<p>IPv6ではL2でのアドレス解決にARPではなくICMPv6を使います。</p>
<h4>RA(Router Advertisement)パケットではDNSアドレスを通知することができない</h4>
<p>策定当初はRAでDNSアドレスを配布することはできませんでしたが現在は可能です。<br />
ただし実装されているとは限りません。<br />
不幸なことに、DNSアドレス配布周りでは幾つかの規格があり、端末とルータによって実装がバラバラです。</p>
<h4>ICMPv6はDos攻撃に利用されるため常にフィルタしたほうが良い</h4>
<p>上にも書いてありますが、ICMPv6をフィルタするとL2でのアドレス解決ができない、SLAACが使えないなどの問題があります。</p>
<h4>ユニークローカルアドレスはルータを超えられる</h4>
<p>リンクローカルアドレスはルータ超えできませんが、ユニークローカルアドレスはルータを超えられます。<br />
これが正解です。</p>
<h4>IPv6にはIPv4射影アドレスがあるので、宛先ノードがIPv6非対応でもIPv6で通信することができる</h4>
<p>IPv4射影アドレスを使うとアプリケーションはIPv4アドレスをIPv6アドレスとして処理できますが、実際の通信ではIPv4を使います。<br />
そのため、宛先ノードがIPv6非対応でもIPv6通信ができるというのは厳密には間違いです。</p>
<h2>講評</h2>
<p>おおよその正否は調べれば分りますが、「射影アドレス」と「ルータ越え」のどちらにするかで悩んだチームが多いようです。<br />
この場合、問題文に「最も正しい」とあるので少し悩みどころのある前者ではなく、後者が正解となります。</p>
