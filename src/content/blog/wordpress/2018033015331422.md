---
title: "問題解説: 新規プロジェクト１"
description: "問題解説: 新規プロジェクト１"
tags: [ICTSC9,ネットワーク関連,問題解説]
pubDate: 2018-03-30T15:33:09
slug: "2018/03/30/問題解説: 新規プロジェクト１"
draft: false
renderer: "html"
sticky: false
---

<h1>問題文</h1>
<p>我社では、新しい部署の開設に伴い新たなネットワークレンジを割り当てることになった。</p>
<p>担当者はメールで渡された情報に従ってコンフィグを作成し、新しく導入した機材に流し込んだ。<br />
しかし、いざ設定してみると他部署のネットワークとの疎通が取れないことが分かった。<br />
各担当者に問い合わせたが原因は特定できなかったという。</p>
<p>そこで、この問題を解決し、原因およびその根拠、また修正したコンフィグを報告してほしい。</p>
<p>担当者に送られたメール:</p>
<pre class="brush: plain; title: ; title: ; notranslate" title=""><code>件名: ○○部署開設に伴うネットワーク情報まとめ

本文:
お疲れ様です。
○○部署で使うネットワーク情報についてのまとめです。
192.168.38.0/24、デフォゲは192.168.38.1
ipv6アドレスの割り当てなし。

新しく使うアドレス
192.168.39.0/24
ipv6アドレスの割り当てなし。

新しく導入した機材で192.168.38.39を介して192.168.39.0/24を接続し、RIPで社内LAN向けに経路情報を投げてください。</code></pre>
<h2>制約・情報</h2>
<p>routerAの192.168.39.0/24のネットワークにPCを接続して192.168.37.1にPingが飛ぶように設定を修正してください。</p>
<p>PCは、2960Bのfa0/1に接続してください。</p>
<p>routerAは1941です、routerBは操作できません。<br />
enable password : <code>ZWKKEFzV</code></p>
<p>この問題に関係のあるIP及びvrfは<code>192.168.37.0/24</code>,<code>192.168.38.0/24</code>,<code>192.168.39.0/24</code>,<code>vrf05</code>です。それを除く他のIP,vrfは当問題とは関係ありません。</p>
<p>回答していただく項目は以下の通りです。</p>
<ul>
<li>トラブルの原因とその根拠(使用したツールやコマンド等も明記して)</li>
<li>修正したコンフィグ</li>
</ul>
<h2>問題のスタート</h2>
<p>192.168.39.0/24に接続されたPCから192.168.37.1にPingが飛ばない</p>
<h2>問題のゴール</h2>
<p>問題を解決し、192.168.39.0/24に接続されたPCから192.168.37.1にPingが飛ぶように設定を修正する。</p>
<h1>トラブルの概要</h1>
<p>RIPのバージョン指定を忘れたときに経路情報は見えてるのに<strong>PC</strong>からPingが飛ばなくなる</p>
<h1>解説</h1>
<p>routerAではripのバージョンを指定せず、routerBのみripにversion2を指定した。</p>
<p>ciscoルーターの場合ripのバージョンを指定しなければversion1で動作するが、version2の経路情報も受け取るため、routerAでは192.168.37.0/24を受け取ることができる。しかしrouterBはversion2で固定しているため、version1の経路情報を受け取らない。</p>
<p>そのため、routerBには192.168.39.0/24が伝わらないため疎通が取れなくなる。</p>
<p>この問題はルーター2台のコンフィグを見比べて問題を特定することができない為、流れているパケットを読む(debugなど)必要がある。</p>
<p>routerAで<code>debug ip rip</code>コマンドで自分はversion1をsend、相手からはversion2をreceiveしていることが分かる</p>
<p>手元のRIPのバージョンを2に変更すると正しく疎通できるようになる。</p>
<h1>回答例</h1>
<pre class="brush: plain; title: ; title: ; notranslate" title=""><code>1941でdebug ip rip コマンドを使用したところ、手元がRIPv1、対向がRIPv2を使っていることが分かりました。

そこで
router rip
address-family ipv4 vrf vrf05
version 2
と入力したところ、PCから正しくPingが飛ぶことを確認しました。</code></pre>
<p>最低限これだけの情報が書かれていたらOKです。</p>
