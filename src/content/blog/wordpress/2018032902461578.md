---
title: "問題解説：ダイエット失敗"
description: "問題解説：ダイエット失敗"
tags: [ICTSC9,ネットワーク関連,問題解説]
pubDate: 2018-03-29T02:46:15
slug: "2018/03/29/問題解説：ダイエット失敗"
draft: false
renderer: "html"
sticky: false
---

<h2>問題文</h2>
<h3>導入</h3>
<p>仮想機密伝送路課から同時に2件のトラブルの解決を依頼された。<br />
どうやら社内LANの変更工事を行ったところ、いくつか問題が発生しているようだ。<br />
問題を解決し再発を防止するための作業を行って欲しい。<br />
また、必要であれば上司への相談や提案を行うことが出来る。</p>
<h3>トラブル1</h3>
<p>仮想機密伝送路課から「帯域幅が不足している為、業務に支障をきたしている」という不満の声があり、「ネットワークで使用可能な帯域幅」を増やすこととなった。<br />
以前この部署では上流回線を他の優先的なサービスと併用していた為、何らかの設定が残った可能性が考えられる。<br />
しかし、先日の社内LAN変更工事により回線には次世代ブロードバンドを導入している為、上流の帯域幅のグッドプットは十分に確保されている。<br />
どうやらネットワーク機器の設定変更を忘れてしまっているようだ。<br />
この問題を解決し再発を防止するよう作業してほしい。</p>
<h4>スタート</h4>
<ul>
<li>参加者PCを2960BのFE0/9もしくはFE0/10に接続し適当なWEBページにアクセスすると通信速度が明らかに遅い</li>
</ul>
<h4>ゴール</h4>
<ul>
<li>通信速度の問題が仕様(必要情報)通りに改善されている</li>
</ul>
<h4>情報1</h4>
<ul>
<li>部署内のルータである892jの設定を確認し、帯域幅を適切に設定してください。</li>
<li>enable password : <code>q0bC50xE</code></li>
<li>帯域幅は、上流回線をベストエフォート100Mbpsとして業務に使用する帯域は約40%程度として調整して下さい。</li>
</ul>
<h3>トラブル2</h3>
<p>電子通信網局でBYODを導入し、局内の端末を全てLANに接続することになった。しかし、一部の人から他の人の端末は繋がるのに自分は繋がらないという不満の声が上がっている。<br />
この問題を“適切に”解決し、再発を防止してほしい。</p>
<h4>スタート2</h4>
<ul>
<li>自分“一部の端末”からまともに外部疎通ができない</li>
</ul>
<h4>ゴール2</h4>
<ul>
<li>使用可能なIPアドレスを全て社員の端末に自動設定されるように解放されている。</li>
<li>全ての端末が外部疎通ができる状態になっている</li>
</ul>
<h4>情報2</h4>
<ul>
<li>部署内のルータである892jの設定を確認し、適切に設定を施してください。</li>
<li>enable password : <code>q0bC50xE</code></li>
<li>改善が必要だと思った設定は自由に変更してください。（動作に影響が無ければ減点はありません）</p>
</li>
<li>
<p>この問題に関係のあるIP及びvrfは<code>192.168.17.0/26</code>,<code>vrf17</code>です。それを除く他のIP,vrfは当問題とは関係ありません。</p>
</li>
</ul>
<h4>回答例</h4>
<pre><code>no ip dhcp excluded-address 192.168.17.31 192.168.17.62
ip dhcp excluded-address 192.168.17.62

shape average 40000000

access-list 1 permit 192.168.17.0 0.0.0.63

access-list 100 permit ip 192.168.17.0 0.0.0.63 any
access-list 100 permit ip any 192.168.17.0 0.0.0.63</code></pre>
<h3>コアの技術</h3>
<ul>
<li>クラスベースの帯域制御/シェーピング</li>
<li>NAT・DHCP・ACLの複合</li>
</ul>
<h3>トラブルの内容</h3>
<ul>
<li>シェーピングをかけて帯域制限をしようとしたが、意図した速度より通信速度が大幅に遅くなってしまった</li>
<li>BYODでスマホ等を導入したらネットワークに端末が増えて過ぎて(DHCPで)繋がらない</li>
<li>DHCPのレンジを拡張したらNATのACLとシェーピングのACLから外れたアドレスが不調になる</li>
</ul>
<p>###スタート地点<br />
通信速度がめっちゃ遅い<br />
“一部の端末”からまともに外部疎通ができない</p>
<p>###ゴール地点<br />
普通にインターネットができる</p>
<p>###採点基準(基準点160点)<br />
&#8211; (計120点)原因の説明・理解<br />
&#8211; (30点)ホストアドレスが足りないと気づきNWアドレスの拡張を提案する<br />
&#8211; (30点)シェーピングのパラメータが適切な値で無いと気づく<br />
&#8211; (30点)IPアドレスが足りない事に気づく<br />
&#8211; (30点)ACLが不適切であると気付く</p>
<ul>
<li>(計40点)リモートネットワークに快適に接続できる</li>
<li>(20点)スループットが改善されている</li>
<li>(20点)全員が適切に接続し自動アドレッシングが行われる</p>
</li>
<li>
<p>(計40点)いい感じで設定を直している</p>
</li>
<li>(10点)シェーピングの設定値を正しい値に修正出来ているか</li>
<li>(10点)PATのACLを変更している</li>
<li>(10点)DHCPのレンジ(ip dhcp excluded-address)をいい感じに変更しているか</li>
<li>(10点)シェーピングのACLを書き換えているか</li>
<li>(10点)アイデア(DHCPのリース期間を変更するなど)</li>
</ul>
<h2>問題解説</h2>
<p>この問題はクラスベースの帯域制御、シェーピング、PAT・DHCP・ACLのに関する問題です。<br />
ACLのステートメント条件が他の設定コマンドに影響する事が原因です。<br />
また、ネットワーク管理者はシェーピングを定義する為に発行されているコマンドのサブコマンドパラメータの単位に注意する必要があります。<br />
ネットワーク管理者はこのネットワークセグメントのホスト数を調査し、適切なアドレス設計を上長へ提案する必要があります。</p>
